<div class="lift:surround?with=default;at=content">
    <br/>
    <h2>Rest API</h2>
    <p>This api is primarly meant for communication with the mobile applications.<br/>
    We support json and xml, use the appropiate headers or suffices as shown here.</p>
    <table class="api">
        <tr>
            <th>response</th>
            <th>request header</th>
            <th>suffix</th>
        </tr>
        <tr class="odd">
            <td>xml</td>
            <td><b>Accept: text/xml</b> or <b>Accept: application/xml</b></td>
            <td>[url].xml</td>
        </tr>
        <tr>
            <td>json</td>
            <td><b>Accept: application/json</b></td>
            <td>[url].json</td>
        </tr>
    </table>
    <h3>Medication</h3>
    <p>directly query the medication database</p>
    <table class="api">
        <tr class="odd">
            <th style="width:200px;">URL</th>
            <th style="width:50px;">Method</th>
            <th>Description</th>
        </tr>
        <tr>
            <td><a href="/api/1.0/medicine">/api/1.0/medicine</a> </td>
            <td>GET</td>
            <td>All medication</td>
        </tr>
        <tr class="odd">
            <td><a href="/api/1.0/medicine/{id}">/api/1.0/medicine/{id}</a> </td>
            <td>GET</td>
            <td>A single medication by Id</td>
        </tr>
        <tr>
            <td>/api/1.0/medicine</td>
            <td>PUT</td>
            <td>add new medication <span class="red">* not yet implemented</span></td>
        </tr>
        <tr class="odd">
            <td>/api/1.0/medicine</td>
            <td>POST</td>
            <td>Update a medication <span class="red">* not yet implemented</span></td>
        </tr>
        <tr>
            <td>/api/1.0/medicine/{id}</td>
            <td>DELETE</td>
            <td>Delete a medication <span class="red">* not yet implemented</span></td>
        </tr>
        <tr>
            <td>/api/1.0/medicine/search/{text} </td>
            <td>GET</td>
            <td>search the database <span class="red">* not yet implemented</span></td>
        </tr>
    </table>
    <h3>User specific</h3>
    <p>All user based information</p>
     <table class="api">
        <tr>
            <th style="width:200px;">URL</th>
            <th style="width:50px;">Method</th>
            <th>Description</th>
        </tr>
        <tr class="odd">
            <td><a href="/api/1.0/auth/{email}/{password}">/api/1.0/auth/{email}/{password}</a> </td>
            <td>GET</td>
            <td>Authentication, returns key to use in subsequent calls.</td>
        </tr>
        <tr>
            <td>/api/1.0/{key}/profile</td>
            <td>GET</td>
            <td>return's user profile <span class="red">* not yet implemented</span></td>
        </tr>
        <tr class="odd">
            <td><a href="/api/1.0/user/{key}/stock">/api/1.0/{key}/stock</a> </td>
            <td>GET</td>
            <td>Stock, what medication does the user have in stock.</td>
        </tr>
        <tr>
            <td><a href="/api/1.0/user/{key}/dosages">/api/1.0/user/{key}/dosages</a> </td>
            <td>GET</td>
            <td>Dosages, how much does the user take each period.</td>
        </tr>
        <tr class="odd">
            <td><a href="/api/1.0/user/{key}/supplies">/api/1.0/user/{key}/supplies</a> </td>
            <td>GET</td>
            <td>Supplies, how long will his stock last, giving the current dosages.</td>
        </tr>
         <tr>
             <td><a href="/api/1.0/user/{key}/dosageoptions">/api/1.0/user/{key}/dosageoptions</a> </td>
             <td>GET</td>
             <td>Returns the daily dosage schedule for this user</td>
         </tr>
        <tr>
            <td><a href="/api/1.0/user/{key}/takedose/{schedule}">/api/1.0/user/{key}/takedose/{schedule}</a></td>
            <td>GET</td>
            <td colspan="2">take a dose, reducing stock</td>
        </tr>
        <tr class="odd">
            <td><a href="/api/1.0/user/{key}/addstock/">/api/1.0/user/{key}/addstock/</a></td>
            <td>GET</td>
            <td>add stock
                <table class="api">
                     <tr>
                         <th>Param</th>
                         <th>Description</th>
                     </tr>
                    <tr class="odd">
                         <td>medicineId</td>
                         <td>the id of the medicine</td>
                     </tr>
                     <tr>
                         <td>amount</td>
                         <td>the amount of stock to add, note that a negative amount will reduce stock</td>
                     </tr>
                  </table>
             </td>
        </tr>
     </table>
</div>

